// JavaScript Document
var R_format_type = {'1':'50', '2':'90', '3':'130', '4':'160'};


var A_format_type = {
	'1':{'4':'22', '2':'40', '1':'80', 'Y':'15'}
	, '2':{'4':'29', '2':'52', '1':'104', 'Y':'25'}
	, '3':{'4':'36', '2':'64', '1':'128', 'Y':'35'}
	, '4':{'4':'43', '2':'76', '1':'152', 'Y':'45'}
	, '5':{'4':'50', '2':'88', '1':'176', 'Y':'55'}
	, '6':{'4':'57', '2':'96', '1':'192', 'Y':'65'}
	, '7':{'4':'64', '2':'104', '1':'208', 'Y':'75'}
	, '8':{'4':'71', '2':'112', '1':'224', 'Y':'85'}
	, '9':{'4':'78', '2':'120', '1':'240', 'Y':'95'}
	, '10':{'4':'85', '2':'128', '1':'256', 'Y':'105'}
	, '11':{'4':'92', '2':'136', '1':'272', 'Y':'115'}
	, '12':{'4':'99', '2':'144', '1':'288', 'Y':'125'}
	, '13':{'4':'106', '2':'152', '1':'304', 'Y':'135'}
	, '14':{'4':'113', '2':'160', '1':'320', 'Y':'145'}
	, '15':{'4':'120', '2':'168', '1':'336', 'Y':'155'}
	, '16':{'4':'127', '2':'176', '1':'352', 'Y':'165'}
};

var F_format_type = {
	'1':{'1':'0.11', '2':'0.12', '3':'0.14'}
	, '2':{'1':'0.12', '2':'0.13', '3':'0.15'}
	, '3':{'1':'0.14', '2':'0.15', '3':'0.18'}
	, '4':{'1':'0.16', '2':'0.17', '3':'0.2'}
	, '5':{'1':'0.18', '2':'0.2', '3':'0.23'}
	, '6':{'1':'0.2', '2':'0.22', '3':'0.26'}
	, '7':{'1':'0.24', '2':'0.26', '3':'0.3'}
	, '8':{'1':'0.3', '2':'0.34', '3':'0.39'}
	, '9':{'1':'0.36', '2':'0.45', '3':'0.55'}
	, '10':{'1':'0.075', '2':'0.083', '3':'0.097'}
	, '11':{'1':'0.085', '2':'0.095', '3':'0.11'}
	, '12':{'1':'0.106', '2':'0.138', '3':'0.138'}
	, '13':{'1':'0.21', '2':'0.21', '3':'0.21'}
	, '14':{'1':'0.27', '2':'0.27', '3':'0.27'}
	, '15':{'1':'0.056', '2':'0.069', '3':'0.069'}
	, '16':{'1':'0.08', '2':'0.102', '3':'0.102'}
	, '17':{'1':'0.51', '2':'0.51', '3':'0.51'}
};

var J_format_type = {
	 '1':{'4':'0.03', '2':'0.04', '1':'0.08', 'X':'0'}
	, '2':{'4':'0.06', '2':'0.09', '1':'0.15', 'X':'0'}
	, '3':{'4':'0.06', '2':'0.08', '1':'0.16', 'X':'0'}
	, '4':{'4':'0.11', '2':'0.17', '1':'0.3', 'X':'0'}
	, '5':{'4':'0.08', '2':'0.13', '1':'0.24', 'X':'0'}
	, '6':{'4':'0.06', '2':'0.11', '1':'0.21', 'X':'0'}
	, '7':{'4':'0.16', '2':'0.26', '1':'0.48', 'X':'0'}
	, '8':{'4':'0.12', '2':'0.22', '1':'0.42', 'X':'0'}
	, '9':{'4':'0.18', '2':'0.24', '1':'0.37', 'X':'55'}
	, '10':{'4':'0.36', '2':'0.48', '1':'0.74', 'X':'110'}
};

var W_format_type = {
	'1':{'4':'0.06', '2':'0.12', '1':'0.25'}
	, '2':{'4':'0.04', '2':'0.08', '1':'0.26'}
	, '3':{'4':'0.02', '2':'0.05', '1':'0.1'}
	, '4':{'4':'0.015', '2':'0.04', '1':'0.08'}
	, '5':{'4':'30', '2':'45', '1':'80'}
	, '6':{'4':'90', '2':'195', '1':'360'}
};






function build_calculator(params) {
/*
((Q+R)/A)*F = хартия							
((B+C)*T)+D = печат							
((Q+(R/3))*J)+X = покритие							
(K*Y)+(((Q*(L+M))*0,01)+((L+M)*8)) = дов. работи							
N = щанцоване (според формулата)							
О+P = предпечат							
total = ((хартия*Z) + (печат*Z) + (покритие*Z) + (дов. работи*Z))
*/
	var paper = 0;
	var p_print = 0;
	var p_cover = 0;
	var dov_rab = 0;
	var pred_pechat = 0;
	
	pred_pechat = (params['O']+params['P']);
	paper = (	(((params['Q']+params['R'])/params['A'])*params['F'])	);
	p_print = (	((params['B']+params['C'])*params['T'])+params['D']	);
	p_cover =  (	((params['Q']+(params['R']/3))*params['J'])+params['X']	);
	dov_rab = (	(params['K']*params['Y'])+(((params['Q']*(params['L']+params['M']))*0.01)+((params['L']+params['M'])*4))	);

	var total_sum = ((p_print*params['Z']) + (paper*params['Z']) +(p_cover*params['Z']) +(dov_rab*params['Z']) + (params['N']*params['Z']) +pred_pechat);
	//(ОБЩО ПЕЧАТ *Z)+(ОБЩО ХАРТИЯ  *Z)+(ОБЩО ПОКРИТИЕ *Z)+(ОБЩО ДОВ. РАБОТА *Z)+(ОБЩО ЩАНЦОВАНЕ*Z)+ОБЩО ПРЕДПЕЧАТ
	
	
	var singel_sum = total_sum/params['Q'];
	var vat_sum = (((20.0+100)/100)*total_sum);
	
	$('#single_sum').html(roundNumber(singel_sum, 2)+' лв/бр');
	$('#sum_total').html(roundNumber(total_sum, 2)+' лв');
	$('#sum_vat_total').html(roundNumber(vat_sum, 2)+' лв');

return false;
//	add_msg(html,MSG_SUCCESS);
}//build_calculator


function roundNumber(num, dec) {
	var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
	if(result.toString().length == 1) result = result+'.00';
	

	return result; //parseFloat(result);
//		return num;
}
