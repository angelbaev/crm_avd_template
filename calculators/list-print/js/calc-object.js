// JavaScript Document
var R_format_type = {'1':'50', '2':'90', '3':'130', '4':'160'};


var A_format_type = {
	'1':{'4':'38', '2':'50', '1':'80', 'Y':'20'}
	, '2':{'4':'50', '2':'66', '1':'104', 'Y':'35'}
	, '3':{'4':'62', '2':'82', '1':'128', 'Y':'50'}
	, '4':{'4':'74', '2':'98', '1':'152', 'Y':'65'}
	, '5':{'4':'86', '2':'114', '1':'176', 'Y':'80'}
	, '6':{'4':'98', '2':'130', '1':'200', 'Y':'95'}
	, '7':{'4':'110', '2':'146', '1':'224', 'Y':'110'}
	, '8':{'4':'122', '2':'162', '1':'248', 'Y':'125'}
	, '9':{'4':'134', '2':'178', '1':'272', 'Y':'140'}
	, '10':{'4':'146', '2':'194', '1':'296', 'Y':'155'}
	, '11':{'4':'158', '2':'210', '1':'320', 'Y':'170'}
	, '12':{'4':'170', '2':'226', '1':'344', 'Y':'185'}
	, '13':{'4':'182', '2':'242', '1':'368', 'Y':'200'}
	, '14':{'4':'194', '2':'258', '1':'392', 'Y':'215'}
	, '15':{'4':'206', '2':'274', '1':'416', 'Y':'230'}
	, '16':{'4':'218', '2':'290', '1':'440', 'Y':'245'}
};

var F_format_type = {
	'1':{'1':'0.22', '2':'0.25', '3':'0.29'}
	, '2':{'1':'0.25', '2':'0.28', '3':'0.32'}
	, '3':{'1':'0.28', '2':'0.32', '3':'0.36'}
	, '4':{'1':'0.31', '2':'0.35', '3':'0.39'}
	, '5':{'1':'0.35', '2':'0.41', '3':'0.45'}
	, '6':{'1':'0.39', '2':'0.45', '3':'0.50'}
	, '7':{'1':'0.46', '2':'0.34', '3':'0.59'}
	, '8':{'1':'0.57', '2':'0.63', '3':'0.74'}
	, '9':{'1':'0.69', '2':'0.80', '3':'0.88'}
	, '10':{'1':'1.05', '2':'1.05', '3':'1.05'}
	, '11':{'1':'0.18', '2':'0.20', '3':'0.22'}
	, '12':{'1':'0.20', '2':'0.22', '3':'0.25'}
	, '13':{'1':'0.24', '2':'0.27', '3':'0.31'}
	, '14':{'1':'0.34', '2':'0.39', '3':'0.43'}
	, '15':{'1':'0.45', '2':'0.53', '3':'0.59'}
	, '16':{'1':'0.11', '2':'0.13', '3':'0.14'}
	, '17':{'1':'0.15', '2':'0.18', '3':'0.20'}
	, '18':{'1':'0.98', '2':'1.01', '3':'1.05'}
};

var J_format_type = {
	'1':{'4':'0.07', '2':'0.08', '1':'0.15', 'X':'14'}
	, '2':{'4':'0.11', '2':'0.15', '1':'0.25', 'X':'14'}
	, '3':{'4':'0.13', '2':'0.15', '1':'0.27', 'X':'14'}
	, '4':{'4':'0.18', '2':'0.29', '1':'0.49', 'X':'14'}
	, '5':{'4':'0.14', '2':'0.23', '1':'0.41', 'X':'14'}
	, '6':{'4':'0.11', '2':'0.20', '1':'0.37', 'X':'14'}
	, '7':{'4':'0.28', '2':'0.46', '1':'0.83', 'X':'14'}
	, '8':{'4':'0.25', '2':'0.40', '1':'0.74', 'X':'14'}
	, '9':{'4':'0.34', '2':'0.41', '1':'0.61', 'X':'119'}
	, '10':{'4':'0.67', '2':'0.82', '1':'1.22', 'X':'210'}
};

var W_format_type = {
	'1':{'4':'0.08', '2':'0.14', '1':'0.3'}
	, '2':{'4':'0.07', '2':'0.1', '1':'0.28'}
	, '3':{'4':'0.06', '2':'0.09', '1':'0.2'}
	, '4':{'4':'0.05', '2':'0.08', '1':'0.14'}
	, '5':{'4':'50', '2':'60', '1':'100'}
	, '6':{'4':'100', '2':'210', '1':'360'}
};






function build_calculator(params) {
/*
total = ((хартия*Z) + (печат*Z) + (покритие*Z) + (дов. работи*Z))


H/G=Q							
((Q+R)/A)*F = хартия							
((B+C)*T)+D = печат							
((Q+(R/3))*J)+X = покритие							
(K*Y)+(((Q*(L+M))*0,01)+((L+M)*4)) = дов. Работи							
N = щанцоване (според формулата)							
О+P = предпечат							

*/
	var paper = 0;
	var p_print = 0;
	var p_cover = 0;
	var dov_rab = 0;
	var pred_pechat = 0;
	var Q = 0;
	Q = (params['H']/params['G']);
	paper = (	(((Q+params['R'])/params['A'])*params['F'])	);
	p_print = (	((params['B']+params['C'])*params['T'])+params['D']	);
	p_cover =  (	((Q+(params['R']/3))*params['J'])+params['X']	);
	dov_rab = (	(params['K']*params['Y'])+(((Q*(params['L']+params['M']))*0.02)+((params['L']+params['M'])*4))	);
	pred_pechat = (params['O']+params['P']);

	var total_sum = ((p_print*params['Z']) + (paper*params['Z']) +(p_cover*params['Z']) +(dov_rab*params['Z']) + (params['N']*params['Z']) +pred_pechat);
	//(ОБЩО ПЕЧАТ *Z)+(ОБЩО ХАРТИЯ  *Z)+(ОБЩО ПОКРИТИЕ *Z)+(ОБЩО ДОВ. РАБОТА *Z)+(ОБЩО ЩАНЦОВАНЕ*Z)+ОБЩО ПРЕДПЕЧАТ
	
	
	var singel_sum = total_sum/params['H'];
	var vat_sum = (((20.0+100)/100)*total_sum);
	
	$('#single_sum').html(roundNumber(singel_sum, 2)+' лв/бр');
	$('#sum_total').html(roundNumber(total_sum, 2)+' лв');
	$('#sum_vat_total').html(roundNumber(vat_sum, 2)+' лв');

return false;
//	add_msg(html,MSG_SUCCESS);
}//build_calculator


function roundNumber(num, dec) {
	var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
	if(result.toString().indexOf(".") == -1) result = result+'.00';
	

	return result; //parseFloat(result);
//		return num;
}
